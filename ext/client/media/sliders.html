<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Java Sliders</title>
</head>
<body>
  <h2>Adjust Parameters</h2>
  <div id="slider-container"></div>

  <script>
    const vscode = acquireVsCodeApi();

    window.addEventListener('message', event => {
      const message = event.data;

      if (message.type === 'updateSliders') {
        const sliders = message.sliders;
        const container = document.getElementById('slider-container');
        container.innerHTML = ''; // Clear previous sliders

        for (const config of sliders) {
          const id = config.id || 'slider';
          const labelText = id || config.label;

          // Label
          const label = document.createElement('label');
          label.setAttribute('for', id);
          label.textContent = labelText + ': ';

          // Value display
          const valueDisplay = document.createElement('span');
          const initialValue = config.val;
          valueDisplay.textContent = initialValue;

          // Slider input
          const input = document.createElement('input');
          input.type = 'range';
          input.id = id;
          input.name = id;
          input.min = config.min ?? 0;
          input.max = config.max ?? 100;
          input.value = initialValue;

          // Update value display on input
          input.addEventListener('input', () => {
            valueDisplay.textContent = input.value;
          });

          // Only send message on 'change' (when user releases slider)
          input.addEventListener('change', () => {
            vscode.postMessage({
              type: 'sliderChange',
              id: input.id,
              value: input.value
            });
          });

          // Add elements to DOM
          container.appendChild(label);
          container.appendChild(valueDisplay);
          container.appendChild(document.createElement('br'));
          container.appendChild(input);
          container.appendChild(document.createElement('br'));
          container.appendChild(document.createElement('br'));
        }
      }
    });
  </script>
</body>
</html>
