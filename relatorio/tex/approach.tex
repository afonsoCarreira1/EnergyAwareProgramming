\chapter{Approach and Implementation}\label{chapter:approach}



{\color{blue}The main goal of this work is to help developers understand the energy consumption of their programs, enabling them to make informed decisions about energy efficiency during development.

In order to achieve this goal, a framework was built with the objective of simplifying and automating the process of program generation, energy measurement, and model training. The framework is built with a modular approach, by making it easier to change in face of new needs. It is composed of four distinct modules, three implemented in Java and one as a standalone Python script, ensuring ease of installation and integration. Depending on the specific use case, these modules can function either as a unit or independently. Being the final component a simple and practical extension tool for VSCode, it can quickly and accurately estimate developers programs energy consumption. This allows them to get immediate feedback on energy consumption with every code change, facilitating energy-efficient development.}



Many devices rely on Java and the JVM, so it is important that the code they run is energy efficient. Several factors can affect the power consumption of Java applications, including the behavior of the garbage collector and the efficiency of the memory management system ~\cite{10.5555/1267847.1267870} making it difficult to predict the power consumption of Java programs. This unpredictability highlights the need for a specialized tool to accurately measure and analyze power consumption so that developers can optimize their applications for energy efficiency.
Java is an excellent choice for developing this framework because of its high interoperability with various operating systems and its widespread usage across the globe, making it a reliable and option. It has a wide range of useful libraries (JRAPL, JoularJx, Jalen) that help to measure energy accurately, and Java's typing and object-oriented features make the code easier to maintain and extend, so the tool can evolve with new energy metering standards and technologies.

There are several Java parsing tools available, such as WALA~\cite{wala_main}, SootUp~\cite{sootup_main}, Spoon~\cite{spoon_main} and JavaParser~\cite{javaParser}. WALA and SootUp are primarily designed for analyzing Java Bytecode and are generally more complex to use. For this project, Spoon was chosen because it is a user-friendly tool that facilitates easy retrieval and manipulation of the AST from Java source code. Both JavaParser and Spoon support AST manipulation and code generation. However, Spoon provides a deeper, type-aware metamodel and built-in templating features. These features make Spoon more suitable for generating code that conforms to Javaâ€™s syntactic and semantic rules, especially in complex transformation scenarios.


\begin{figure}[htbp]
  \centering
  \includegraphics[scale=0.7]{figures/main_modules.pdf}
  \caption{Main modules}
  \label{fig:main_modules}
\end{figure}




{\color{blue}To build the framework, it was necessary to design a system architecture capable of supporting the entire pipeline, from program generation and benchmark data collection to model training and prediction. The architecture is divided into distinct stages, each carefully analyzed and refined before progressing to the next.}
The architecture is divided in four main modules: \textbf{Program Generator}, \textbf{Orchestrator}, \textbf{Parser}, and \textbf{Extension Tool}, as illustrated in Figure~\ref{fig:main_modules}, will be explained in the following sections:



\input{./tex/program_generator}

\input{./tex/orchestrator}

\input{./tex/model_training}

\input{./tex/extension_build}
